var S=Object.defineProperty;var A=(l,t,s)=>t in l?S(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var n=(l,t,s)=>(A(l,typeof t!="symbol"?t+"":t,s),s);import E from"./Icon.9762e357.js";import{x as F,o as p,c as v,a as r,t as g,K as G,r as u,D as V,B as D,z as c,b,I as j,L as P,F as R,A as z,E as H,M}from"./entry.9882ac87.js";import{u as q}from"./fetch.cc871b2d.js";import{D as h}from"./DateFormat.87ddea13.js";import{_ as $}from"./SelectInput.vue.62f5b245.js";class K{constructor(t){n(this,"id");n(this,"name");n(this,"platform");n(this,"picture");n(this,"completedDate");n(this,"totalTime");this.id=t.id,this.name=t.name,this.platform=t.platform,this.picture=t.picture,this.completedDate=h.toDate(t.completedDate),this.totalTime=t.totalTime}get completedDateFormatted(){return h.fromDate(this.completedDate,h.SHORT_DATE_FORMAT)}get totalTimeFormatted(){return h.durationToTime(this.totalTime)}}const J={class:"flex bg-bg-article dark:bg-bg-article-dark rounded-md p-3 items-center"},Q=["src","alt"],U={class:"flex flex-col flex-1 ml-2"},W={class:"small-title text-text-light dark:text-text-dark"},X={class:"small-subtitle text-text-light dark:text-text-dark"},Y={class:"subtitle"},Z={class:"font-bold text-darkGray small-title"},ee=F({__name:"CompletedGameInline",props:{game:{type:Object,required:!0}},setup(l){return(t,s)=>(p(),v("div",J,[r("img",{class:"object-cover w-[70px] h-[70px] rounded",src:l.game.picture,alt:`${l.game.name} illustration`},null,8,Q),r("div",U,[r("h1",W,g(l.game.name),1),r("p",X,g(l.game.platform),1),r("p",Y,g(l.game.completedDateFormatted),1)]),r("h1",Z,g(l.game.totalTimeFormatted),1)]))}}),te={key:0,class:"mb-5 grid grid-cols-1 md:grid-cols-3 gap-3"},ae=["placeholder","value"],le={class:"flex items-center w-full"},se={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3"},de=F({__name:"index",props:{limit:{type:Number,default:null},activateSearch:{type:Boolean,default:!0}},async setup(l){var y;let t,s;const I=l,L=M(),{t:f}=G(),N={0:f("games.sortBy.completionDate"),1:f("games.sortBy.name"),2:f("games.sortBy.platform"),3:f("games.sortBy.playtime")},d={asc:!0,desc:!1},x=u([]),_=u(""),k=u(0),C=u(0),m=u(d.asc),{data:T}=([t,s]=V(()=>q(`${L.public.api.route}/hltb`,"$CbpefjC91p")),t=await t,s(),t);x.value=((y=T.value)==null?void 0:y.slice(0,I.limit??T.value.length).map(a=>new K(a)))??[];const w=D(()=>{const a={};return["------",...x.value.reduce((e,i)=>(e.includes(i.platform)||e.push(i.platform),e),[])].forEach((e,i)=>a[i]=e),a}),B=D(()=>w.value[k.value]),O=D(()=>x.value.filter(a=>a.name.toLowerCase().includes(_.value.toLowerCase())&&(a.platform.toLowerCase().includes(B.value.toLowerCase())||B.value==="------")).sort((a,e)=>{switch(C.value){case 0:return m.value===d.asc?a.completedDate.isBefore(e.completedDate)?1:-1:a.completedDate.isBefore(e.completedDate)?-1:1;case 1:return m.value===d.asc?a.name.localeCompare(e.name):e.name.localeCompare(a.name);case 2:return m.value===d.asc?a.platform.localeCompare(e.platform):e.platform.localeCompare(a.platform);case 3:return m.value===d.asc?a.totalTime-e.totalTime:e.totalTime-a.totalTime;default:return 0}}));return(a,e)=>{const i=E;return p(),v("div",null,[l.activateSearch?(p(),v("div",te,[r("input",{type:"search",name:"search",id:"search",placeholder:a.$t("games.searchPlaceholder"),value:c(_),onInput:e[0]||(e[0]=o=>_.value=o.target.value),class:"w-full rounded-md border-0 py-2 px-5 placeholder:text-gray text-text-light dark:text-text-dark bg-white dark:bg-black"},null,40,ae),b($,{"selected-value":c(k),items:c(w),onOnChanged:e[1]||(e[1]=o=>k.value=Number.parseInt(o)),class:"w-full"},null,8,["selected-value","items"]),r("div",le,[b($,{"selected-value":c(C),items:N,onOnChanged:e[2]||(e[2]=o=>C.value=Number.parseInt(o)),class:"w-full"},null,8,["selected-value"]),b(i,{name:"solar:sort-from-top-to-bottom-bold",class:j([c(m)?"opened":"closed","h-7 w-7 ml-2 cursor-pointer text-text-light dark:text-text-dark"]),onClick:e[3]||(e[3]=o=>m.value=!c(m))},null,8,["class"])])])):P("",!0),r("div",se,[(p(!0),v(R,null,z(c(O),o=>(p(),H(ee,{game:o,key:o.id},null,8,["game"]))),128))])])}}});export{de as _};
